#import '../fragments/components/TextModule.fragment.graphql'
#import '../fragments/components/PullquoteModule.fragment.graphql'
#import '../fragments/components/ImageModule.fragment.graphql'
#import '../fragments/components/ImageCarousel.fragment.graphql'

query storyBySlug($locale: I18NLocaleCode, $slug: String!) {
    stories(locale: $locale, filters: { slug: { eq: $slug } }) {
        data {
            id
            attributes {
                title
                preface
                publishedAt
                author {
                    data {
                        id
                        attributes {
                            firstName
                            insertion
                            lastName
                        }
                    }
                }
                timeframe {
                    id
                    yearStart
                    yearEnd
                }
                locations {
                    data {
                        id
                        attributes {
                            city
                        }
                    }
                }
                publicationDate {
                    date
                    displayType
                }
                components {
                    ... on ComponentModulesTextModule {
                        ...textModuleFragment
                    }
                    ... on ComponentModulesImage {
                        ...imageModuleFragment
                    }
                    ... on ComponentModulesPullquote {
                        ...pullquoteModuleFragment
                    }
                    ... on ComponentModulesTableModule {
                        ...tableModuleFragment
                    }
                    ... on ComponentModulesTitleModule {
                        ...titleModuleFragment
                    }
                    ... on ComponentModulesImageCarousel {
                        ...imageCarouselModuleFragment
                    }
                }
            }
        }
    }
}
