#import '../fragments/components/TextModule.fragment.graphql'
#import '../fragments/components/PullquoteModule.fragment.graphql'
#import '../fragments/components/ImageModule.fragment.graphql'
#import '../fragments/components/TableModuleFragment.fragment.graphql'
#import '../fragments/components/TitleModule.fragment.graphql'
#import '../fragments/components/ImageCarousel.fragment.graphql'
#import '../fragments/components/ButtonsModule.fragment.graphql'
#import '../fragments/components/GridModule.fragment.graphql'
#import '../fragments/components/core/baseTriplyRecord.fragment.graphql'

query storyById($locale: String, $id: ID, $publicationState: String = "LIVE") {
  stories(locale: $locale, filters: { id: { eq: $id } }, publicationState: $publicationState) {
        data {
            id
            __typename
            attributes {
                title
                description
                shortDescription
                publishedAt
                author {
                    data {
                        id
                        attributes {
                            firstName
                            insertion
                            lastName
                        }
                    }
                }
                timeframe {
                    id
                    yearStart
                    yearEnd
                }
                locations {
                    data {
                        id
                        attributes {
                            city
                        }
                    }
                }
                publicationDate {
                    date
                    displayType
                }
                triplyRecords {
                    data {
                        id
                        attributes {
                            type
                            recordId
                            archive {
                                ... on ArchivesOtherZoomLevel5DetailType {
                                    id
                                    type
                                    objectNumber
                                }
                                ... on ArchivesFondsZoomLevel5DetailType {
                                    id
                                    objectNumber
                                }
                            }
                            object {
                                title
                                makers {
                                    maker
                                }
                                image
                            }
                            publication {
                                ... on PublicationsAudioVisualZoomLevel5DetailType {
                                    id
                                    type
                                    title
                                }
                                ... on PublicationsArticleZoomLevel5DetailType {
                                    id
                                    type
                                    title
                                }
                                ... on PublicationsSerialZoomLevel5DetailType {
                                    id
                                    type
                                    title
                                }
                                ... on PublicationsBookZoomLevel5DetailType {
                                    id
                                    type
                                    title
                                    authors {
                                        author
                                    }
                                }
                            }
                            people {
                                name
                                profession
                            }
                        }
                    }
                }
                components {
                    ... on ComponentModulesTextModule {
                        ...textModuleFragment
                    }
                    ... on ComponentModulesImage {
                        ...imageModuleFragment
                    }
                    ... on ComponentModulesPullquote {
                        ...pullquoteModuleFragment
                    }
                    ... on ComponentModulesTableModule {
                        ...tableModuleFragment
                    }
                    ... on ComponentModulesTitleModule {
                        ...titleModuleFragment
                    }
                    ... on ComponentModulesImageCarousel {
                        ...imageCarouselModuleFragment
                    }
                    ... on ComponentModulesButtonsModule {
                        ...buttonsModuleFragment
                    }
                    ... on ComponentModulesSubtitle {
                        ...subtitleModuleFragment
                    }
                    ... on ComponentModulesGridModule {
                        ...gridModuleFragment
                    }
                }
                storyLinks {
                    ... on ComponentModulesButtonsModule {
                        ...buttonsModuleFragment
                    }
                }
                triplyRecords {
                    data {
                        ...BaseTriplyRecordFragment
                    }
                }
            }
        }
    }
}

query storyImages($id: String!) {
    story(id: $id) {
        data {
            id
            attributes {
                components {
                    ... on ComponentModulesImage {
                        ...imageModuleFragment
                    }
                }
            }
        }
    }
}
