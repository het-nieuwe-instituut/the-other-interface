query stories(
    $filters: StoryFiltersInput
    $pagination: PaginationArg
    $sort: [String]
    $publicationState: PublicationState
    $locale: I18NLocaleCode
) {
    stories {
        data {
            ...StoryFragment
        }
    }
}

query story($id: ID, $locale: I18NLocaleCode) {
    story {
        data {
            ...StoryFragment
        }
    }
}

# "$type" must be ENUM_TRIPLYRECORD_TYPE
query storiesLinkedToTriplyRecord($recordId: String!, $type: String!) {
    stories(filters: { triplyRecords: { recordId: { eq: $recordId }, type: { eq: $type } } }) {
        data {
            id
            attributes {
                title
            }
        }
    }
}

query storyTriplyRelations($id: ID!) {
    story(id: $id) {
        data {
            id
            attributes {
                triplyRecords {
                    data {
                        ...BaseTriplyRecordFragment
                    }
                }
            }
        }
    }
}

query storiesTotal {
    stories {
        meta {
            pagination {
                total
            }
        }
    }
}

fragment StoryFragment on StoryEntity {
    id
    attributes {
        title
        slug
        components {
            __typename
            ... on ComponentModulesPullquote {
                id
                text
                pullquoteModuleLayout {
                    ...ComponentCoreModuleLayouts
                }
            }
            ... on ComponentModulesTextModule {
                id
                Richtext
                textModuleLayout {
                    ...ComponentCoreModuleLayouts
                }
            }
            ... on ComponentModulesSubtitle {
                id
                text
                subtitleModuleLayout {
                    ...ComponentCoreModuleLayouts
                }
            }
            ... on ComponentModulesTitleModule {
                id
                Title
                titleModuleLayout {
                    ...ComponentCoreModuleLayouts
                }
            }
            ... on ComponentModulesImageCarousel {
                id
                images {
                    data {
                        id
                    }
                }
                description
                imageCarouselModuleLayout {
                    ...ComponentCoreModuleLayouts
                }
            }
            ... on ComponentModulesImage {
                id
                image {
                    data {
                        id
                    }
                }
                caption
                alt_text
                imageModuleLayout {
                    ...ComponentCoreModuleLayouts
                }
            }
            ... on ComponentModulesTableModule {
                id
                table {
                    data {
                        id
                    }
                }
                tableModuleLayout {
                    ...ComponentCoreModuleLayouts
                }
            }
            ... on ComponentModulesButtonsModule {
                id
                buttons {
                    id
                    text
                    url
                    attachment {
                        data {
                            id
                        }
                    }
                    hasAttachment
                }
                buttonStyle
                buttonsModuleLayout {
                    ...ComponentCoreModuleLayouts
                }
            }
            ... on Error {
                code
                message
            }
        }
        author {
            data {
                id
            }
        }
        description
        timeframe {
            id
            yearStart
            yearEnd
        }
        locations {
            data {
                id
            }
        }
        publicationDate {
            id
            date
            displayType
        }
        shortDescription
        triplyRecords {
            data {
                ...BaseTriplyRecordFragment
            }
        }
        createdAt
        updatedAt
        publishedAt
        localizations {
            data {
                id
            }
        }
        locale
    }
}
